## What is an Application Layer DDoS attack?

Application layer attacks or [layer 7](https://www.cloudflare.com/learning/ddos/what-is-layer-7/) (L7) [DDoS attacks](https://www.cloudflare.com/learning/ddos/what-is-a-ddos-attack/) refer to a type of malicious behavior designed to target the “top” layer in the [OSI model](https://www.cloudflare.com/learning/ddos/glossary/open-systems-interconnection-model-osi/) where common internet requests such as [HTTP](https://www.cloudflare.com/learning/ddos/glossary/hypertext-transfer-protocol-http/) GET and HTTP POST occur. These layer 7 attacks, in contrast to network layer attacks such as [DNS Amplification](https://www.cloudflare.com/learning/ddos/dns-amplification-ddos-attack/), are particularly effective due to their consumption of server resources in addition to network resources.

## How do application layer attacks work?

The underlying effectiveness of most DDoS attacks comes from the disparity between the amount of resources it takes to launch an attack relative to the amount of resources it takes to absorb or mitigate one. While this is still the case with L7 attacks, the efficiency of affecting both the targeted server and the network requires less total bandwidth to achieve the same disruptive effect; an application layer attack creates more damage with less total bandwidth.

To explore why this is the case, let's take a look at the difference in relative resource consumption between a client making a request and a server responding to the request. When a user sends a request logging into an online account such as a Gmail account, the amount of data and resources the user’s computer must utilize are minimal and disproportionate to the amount of resources consumed in the process of checking login credentials, loading the relevant user data from a database, and then sending back a response containing the requested webpage.

Even in the absence of a login, many times a server receiving a request from a client must make database queries or other API calls in order to produce a webpage. When this disparity is magnified as a result of many devices targeting a single web property like during a [botnet attack](https://www.cloudflare.com/learning/ddos/what-is-a-ddos-botnet/), the effect can overwhelm the targeted server, resulting in [denial-of-service](https://www.cloudflare.com/learning/ddos/glossary/denial-of-service/) to legitimate traffic. In many cases simply targeting an API with a L7 attack is enough to take the service offline.

#### Why is it difficult to stop application layer DDoS attacks?

Distinguishing between attack traffic and normal traffic is difficult, especially in the case of an application layer attack such as a botnet performing an [HTTP Flood](https://www.cloudflare.com/learning/ddos/http-flood-ddos-attack/) attack against a victim’s server. Because each bot in a botnet makes seemingly legitimate network requests the traffic is not [spoofed](https://www.cloudflare.com/learning/ddos/glossary/ip-spoofing/) and may appear “normal” in origin.

Application layer attacks require an adaptive strategy including the ability to limit traffic based on particular sets of rules, which may fluctuate regularly. Tools such as a properly configured [WAF](https://www.cloudflare.com/learning/ddos/glossary/web-application-firewall-waf/) can mitigate the amount of bogus traffic that is passed on to an [origin server](https://www.cloudflare.com/learning/cdn/glossary/origin-server/), greatly diminishing the impact of the DDoS attempt.

With other attacks such as [SYN floods](https://www.cloudflare.com/learning/ddos/syn-flood-ddos-attack/) or reflection attacks such as [NTP amplification](https://www.cloudflare.com/learning/ddos/ntp-amplification-ddos-attack/), strategies can be used to drop the traffic fairly efficiently provided the network itself has the bandwidth to receive them. Unfortunately, most networks cannot receive a 300Gbps amplification attack, and even fewer networks can properly route and serve the volume of application layer requests an L7 attack can generate.

## What are layer 3 DDoS attacks?

A [distributed denial-of-service (DDoS)](https://www.cloudflare.com/learning/ddos/what-is-a-ddos-attack/) attack attempts to overwhelm its target with large amounts of data. A DDoS attack is like a traffic jam clogging up a freeway, preventing regular traffic from reaching its destination.

Layer 3 DDoS attacks target layer 3 (L3) in the [OSI model](https://www.cloudflare.com/learning/ddos/glossary/open-systems-interconnection-model-osi/). Like all DDoS attacks, the goal of a layer 3 attack is to slow down or crash a program, service, computer, or network, or to fill up capacity so that no one else can receive service. L3 DDoS attacks typically accomplish this by targeting network equipment and infrastructure.

There are a few important differences between layer 3 DDoS attacks and attacks at the higher layers:

1. Layer 3 attacks target the network layer, not transport layer or application layer processes (as layer 4 and [layer 7 DDoS attacks](https://www.cloudflare.com/learning/ddos/application-layer-ddos-attack/) do)
2. Layer 3 attacks do not have to open a [TCP](https://www.cloudflare.com/learning/ddos/glossary/tcp-ip/) connection with the target first
3. Layer 3 attacks do not target a specific port

## What are the protocols used for layer 3?

These are the most widely used layer 3 protocols, and the ones most likely to be used in a DDoS attack:

**IP:** The Internet Protocol (IP) routes and addresses packets of data so that they arrive at the correct destination. Every device that connects to the Internet has an [IP address](https://www.cloudflare.com/learning/dns/glossary/what-is-my-ip-address/), and the IP protocol attaches the correct IP address to each data packet – like addressing a letter to someone.

**IPsec:** IPsec is actually a suite of several protocols, not a single protocol. IPsec is the encrypted version of IP used by [VPNs](https://www.cloudflare.com/learning/access-management/what-is-a-vpn/), similar to the difference between [HTTPS](https://www.cloudflare.com/learning/ssl/what-is-https/) and [HTTP](https://www.cloudflare.com/learning/ddos/glossary/hypertext-transfer-protocol-http/).

**ICMP:** The [Internet Control Message Protocol (ICMP)](https://www.cloudflare.com/learning/ddos/glossary/internet-control-message-protocol-icmp/) handles error reports and testing. A connectionless protocol, ICMP does not use a transport protocol like TCP or UDP. Rather, ICMP packets are sent over IP alone. Developers and networking engineers use ICMP for its ping and traceroute functions. Typically only one ICMP packet needs to be sent at a time.

Other layer 3 protocols include:

- IGMP: The Internet Group Message Protocol manages IP multicast groups, enabling multiple devices within a network to receive the same IP traffic.
- ARP: The Address Resolution Protocol is for use within a single network only. Computers use this protocol to map IP addresses to MAC addresses within the network (a MAC address is a unique identifier hardwired into every Internet-capable device, like a fingerprint).

Attacks are theoretically possible using any of these protocols. ICMP is commonly used to flood a server with too many pings to respond to, or with one large ping packet that crashes the receiving device (this is known as the "[ping of death](https://www.cloudflare.com/learning/ddos/ping-of-death-ddos-attack/)"). Attackers can use IPsec to flood the target with junk data or overly large security [certificates](https://www.cloudflare.com/learning/ssl/what-is-an-ssl-certificate/).

However, not all of these protocols are practical for DDoS attacks, and some types of attacks are made impossible by hardware updates. For example, ARP only operates within a local network, so an attacker would first need to connect to the local network before carrying out the DDoS attack. And ICMP ping of death attacks are not possible with modern hardware, which ignores IP packets that are too large.

## How do L3 DDoS attacks work?

As with other types of DDoS attacks, the attacker sends a large volume of junk network traffic via these protocols. There are various methods for doing this, depending on the protocol. The junk traffic gets in the way of legitimate user requests, slowing down responses to them or blocking them altogether. Sometimes there is so much junk data that it overwhelms the target's resources, and the target crashes.

## What are some well-known types of layer 3 DDoS attacks?

While other attacks are possible, including attacks over IP alone, ICMP-based attacks are the most common. Well-known ICMP attacks include:

- **Ping flood:** In a [ping flood DDoS attack](https://www.cloudflare.com/learning/ddos/ping-icmp-flood-ddos-attack/), the attacker sends thousands or even millions of ping requests to a server at once.
- **Smurf attack:** ICMP has no security or verification measures in place, making it possible for an attacker to spoof an IP address in an ICMP request. In a [Smurf DDoS attack](https://www.cloudflare.com/learning/ddos/smurf-ddos-attack/), the attacker sends out ping requests to thousands of servers, spoofing the target's IP address in the ping requests so that the responses go to the target, not the attacker. Most modern networking hardware is no longer vulnerable to this attack.
- **Ping of death:** In an ICMP ping of death attack, an attacker sends a ping request that is larger than the maximum allowable size to the target. Routers along the way to the target will fragment the ping into smaller packets, so that the target accepts them, but when it tries to reassemble the large packet from the smaller fragments, the packet size exceeds the maximum and crashes the target. Modern devices are not vulnerable to this attack.

## How does Cloudflare protect against layer 3 DDoS attacks?

In addition to blocking DDoS attacks at layers 4 and 7, Cloudflare mitigates layer 3 DDoS attacks. [Cloudflare Magic Transit](https://www.cloudflare.com/magic-transit/) is designed specifically to stop attacks on internal network infrastructure, including DDoS attacks at any layer. The Cloudflare WAF and CDN also stop layer 3 DDoS attacks by only accepting traffic to HTTP and HTTPS ports – these are layer 7 only.

## What is layer 3 in the TCP/IP model?

The TCP/IP model is an alternative model of how networking works. Instead of seven layers, the TCP/IP model has four:

4. Application Layer (corresponds to layers 5-7 in the OSI model)

3. Transport Layer (corresponds to layer 4 in the OSI model)

2. Internet Layer (corresponds to layer 3 in the OSI model)

1. Network Access/Link Layer (corresponds to layers 1-2 in the OSI model)

Referencing the TCP/IP model instead of the OSI model, layer 3 DDoS attacks would be called layer 2 DDoS attacks.


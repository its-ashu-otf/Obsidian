## What is DNS? (The Contacts app of the Internet)
A DNS (Domain Name System) is like a phonebook for the internet. It helps you find websites and online services by matching their human-readable domain names to their numerical IP addresses.

Think of it this way: when you want to visit a website, you typically type in its domain name (like "www.example.com") rather than its IP address (a series of numbers like "93.184.216.34"). The DNS system translates that domain name into the corresponding IP address, allowing your browser to connect to the correct server and display the website.

 DNS translates domain names to [IP addresses](https://www.cloudflare.com/learning/dns/glossary/what-is-my-ip-address/) so browsers can load Internet resources.

Each device connected to the Internet has a unique IP address which other machines use to find the device. DNS servers eliminate the need for humans to memorize IP addresses such as 192.168.1.1 (in IPv4), or more complex newer alphanumeric IP addresses such as 2400:cb00:2048:1::c629:d7a2 (in IPv6).

For example:

* You type in "www.google.com" in your browser.
* The DNS system looks up the IP address associated with "www.google.com".
* It finds the IP address "173.194.222.104" and returns it to your browser.
* Your browser uses that IP address to connect to Google's servers, and you see the website.

Without a DNS system, you'd need to know the exact IP address of every website you want to visit, which would be very cumbersome! The DNS makes it easy for humans to access websites using simple domain names.

![[Pasted image 20240828214334.png]]

### Stub Resolver
A stub resolver is a small program that acts as an intermediary between your application (or the operating system) and the Domain Name System (DNS).

When you ask for a domain name (like "example.com") to be resolved into its IP address, your application sends this request to the stub resolver. The stub resolver then takes care of sending the request to a DNS server, getting the answer back, and providing it to your application.

Think of the stub resolver as a messenger:

1. Your application says: "Hey, I need the IP address for example.com."
2. The stub resolver says: "Okay, I'll take care of that." (sends a request to the DNS server)
3. The DNS server responds with the answer.
4. The stub resolver says: "Here's the result!" (gives the answer back to your application)

The term "stub" implies that this is a minimal program that just performs this specific function - it doesn't have any other features or capabilities.

In modern operating systems, the stub resolver is often provided by the system itself, so you don't usually need to think about it. However, in certain situations (like embedded systems or custom applications), you might need to implement your own stub resolver.

### How does DNS Caching Works?
Caching plays a crucial role in a stub resolver's functionality!

When the stub resolver receives a request from your application, it not only sends the query to the DNS server but also checks its cache for a recent result. If the requested domain name is already cached (i.e., the stub resolver remembers a previous answer), it will:

1. Return the cached answer directly to your application.
2. Possibly update the cache with the current answer, so that future requests can be served more quickly.

This caching mechanism improves performance by reducing the number of times the stub resolver needs to ask the DNS server for information. If the requested domain name is not in the cache (or if it's too old), the stub resolver will:

1. Send a new query to the DNS server.
2. Cache the response, so that future requests can be served quickly.

Caching helps with:

* **Reduced latency**: By serving cached results, your application gets answers more quickly.
* **Lower network traffic**: The stub resolver doesn't need to send as many queries to the DNS server, which reduces overall network usage.

However, caching also introduces some trade-offs:

* **Cache staleness**: If the stub resolver caches a result that's outdated (e.g., due to recent changes in the domain name), it might return incorrect information.
* **Cache size limitations**: As more and more domains are cached, cache size constraints may become an issue.

To mitigate these concerns, modern stub resolvers often employ techniques like:

* **Time-to-live (TTL)**: The DNS server specifies how long a result should be cached, which helps maintain freshness.
* **Least-recently-used (LRU) eviction**: When the cache is full and a new entry needs to be added, the least recently used entry might be evicted.

These caching strategies help balance performance gains with accuracy and resource management.